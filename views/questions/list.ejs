<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/stylesheets/questions/list.css">
<h1>All questions</h1>
<div class="card">
    <div class="card-body">
        <% for(question of questions){ %>
        <div class="card">
            <div class="card-body row">
                <div class="col-1">
                    <div class="row">
                        <div class="col-4 text-muted d-flex align-items-center"><%=question.upvotes%></div>
                        <% if(user) {%>
                        <div class="col-8">
                            <div class="row">
                                <form action="/questions/<%= question._id %>/upvote" class="col ms-2">
                                    <button class="btn btn-sm"><i class="fas fa-angle-up"></i></button>
                                </form>
                            </div>
                            <div class="row">
                                <form action="/questions/<%= question._id %>/downvote" class="col ms-2">
                                    <button class="btn btn-sm"><i class="fas fa-angle-down"></i></button>
                                </form>
                            </div>
                        </div>
                        <% } %>
                    </div>
                </div>
                <div class="col-10">
                    <a href="/questions/<%= question._id %>/answers"><%= question.title %></a>
                </div>
                <div class="col-1">
                    <% if(user && user._id.equals(question.author)){ %>
                    <form action="/questions/<%= question._id %>/edit" method="GET">
                        <button class="btn btn-sm"><i class="fas fa-edit"></i></button>
                    </form>
                    <form action="/questions/<%= question.id %>?_method=delete" method="POST">
                        <button class="btn btn-sm"><i class="fas fa-trash"></i></button>
                    </form>
                    <% } %>
                </div>
            </div>
        </div>
        <% } %>
    </div>
</div>